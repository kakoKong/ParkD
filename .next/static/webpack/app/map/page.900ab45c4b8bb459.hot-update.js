"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/map/page",{

/***/ "(app-pages-browser)/./components/MapView.tsx":
/*!********************************!*\
  !*** ./components/MapView.tsx ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mapbox-gl */ \"(app-pages-browser)/./node_modules/mapbox-gl/dist/mapbox-gl.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_map_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/map-utils */ \"(app-pages-browser)/./lib/map-utils.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n(mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default().accessToken) = \"pk.eyJ1Ijoia2FrbzU1NSIsImEiOiJjbWdmNm9tdGQwNXRkMmlzYnd5em5iMzA4In0.0ZvXKYcQO53noIqiSLWwDA\" || 0;\nconst MapView = /*#__PURE__*/ _s((0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(_c = _s((param, ref)=>{\n    let { zones, pins, center = [\n        100.5018,\n        13.7563\n    ], userLocation, onZoneClick, onPinClick, onViewportChange, maxBounds, className = \"\", disableZoom = false } = param;\n    _s();\n    const mapContainer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const map = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [mapLoaded, setMapLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const onZoneClickRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(onZoneClick);\n    const onPinClickRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(onPinClick);\n    const onViewportChangeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(onViewportChange);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        onZoneClickRef.current = onZoneClick;\n        onPinClickRef.current = onPinClick;\n        onViewportChangeRef.current = onViewportChange;\n    }, [\n        onPinClick,\n        onViewportChange,\n        onZoneClick\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle)(ref, ()=>({\n            zoomToZone: (zone)=>{\n                if (!map.current || !mapLoaded) return;\n                try {\n                    const coordinates = zone.geom.coordinates[0];\n                    const bounds = coordinates.reduce((acc, coord)=>acc.extend(coord), new (mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default().LngLatBounds)(coordinates[0], coordinates[0]));\n                    map.current.fitBounds(bounds, {\n                        padding: {\n                            top: 50,\n                            bottom: 50,\n                            left: 50,\n                            right: 50\n                        },\n                        maxZoom: 15,\n                        duration: 1000\n                    });\n                } catch (error) {\n                    console.error(\"Error zooming to zone:\", error);\n                }\n            },\n            zoomToPin: (pin)=>{\n                if (!map.current || !mapLoaded) return;\n                try {\n                    const [lng, lat] = pin.location.coordinates;\n                    map.current.flyTo({\n                        center: [\n                            lng,\n                            lat\n                        ],\n                        zoom: 16,\n                        duration: 1000\n                    });\n                } catch (error) {\n                    console.error(\"Error zooming to pin:\", error);\n                }\n            },\n            zoomToLocation: (lng, lat)=>{\n                if (!map.current || !mapLoaded) return;\n                try {\n                    map.current.flyTo({\n                        center: [\n                            lng,\n                            lat\n                        ],\n                        zoom: 14,\n                        duration: 1000\n                    });\n                } catch (error) {\n                    console.error(\"Error zooming to location:\", error);\n                }\n            }\n        }), [\n        mapLoaded\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!mapContainer.current || map.current) return;\n        map.current = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default().Map)({\n            container: mapContainer.current,\n            style: \"mapbox://styles/mapbox/light-v11\",\n            center,\n            zoom: 12,\n            ...maxBounds ? {\n                maxBounds\n            } : {},\n            ...disableZoom ? {\n                interactive: false,\n                scrollZoom: false,\n                boxZoom: false,\n                dragRotate: false,\n                dragPan: false,\n                keyboard: false,\n                doubleClickZoom: false,\n                touchZoomRotate: false\n            } : {}\n        });\n        map.current.on(\"load\", ()=>{\n            setMapLoaded(true);\n            if (onViewportChangeRef.current && map.current) {\n                const bounds = map.current.getBounds();\n                if (bounds) {\n                    onViewportChangeRef.current(bounds);\n                }\n            }\n        });\n        if (onViewportChangeRef.current) {\n            const handleViewportChange = ()=>{\n                if (map.current && onViewportChangeRef.current) {\n                    const bounds = map.current.getBounds();\n                    if (bounds) {\n                        onViewportChangeRef.current(bounds);\n                    }\n                }\n            };\n            map.current.on(\"moveend\", handleViewportChange);\n            map.current.on(\"zoomend\", handleViewportChange);\n            map.current._handleViewportChange = handleViewportChange;\n        }\n        return ()=>{\n            var _map_current;\n            if (map.current) {\n                const handleViewportChange = map.current._handleViewportChange;\n                if (handleViewportChange) {\n                    map.current.off(\"moveend\", handleViewportChange);\n                    map.current.off(\"zoomend\", handleViewportChange);\n                    delete map.current._handleViewportChange;\n                }\n            }\n            (_map_current = map.current) === null || _map_current === void 0 ? void 0 : _map_current.remove();\n            map.current = null;\n        };\n    }, [\n        center,\n        disableZoom,\n        maxBounds\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map.current || !mapLoaded) return;\n        if (maxBounds) {\n            map.current.setMaxBounds(maxBounds);\n        } else {\n            map.current.setMaxBounds(null);\n        }\n    }, [\n        mapLoaded,\n        maxBounds\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map.current || !mapLoaded) return;\n        const mapInstance = map.current;\n        const handleZoneClick = (e)=>{\n            if (e.features && e.features[0] && onZoneClickRef.current) {\n                const feature = e.features[0];\n                const zoneData = zones.find((z)=>{\n                    var _feature_properties;\n                    return z.id === ((_feature_properties = feature.properties) === null || _feature_properties === void 0 ? void 0 : _feature_properties.id);\n                });\n                if (zoneData) {\n                    onZoneClickRef.current(zoneData);\n                }\n            }\n        };\n        const handleZoneClickWithPinCheck = (e)=>{\n            const clickedPoint = e.point;\n            const pinFeatures = mapInstance.queryRenderedFeatures(clickedPoint, {\n                layers: [\n                    \"pins-unclustered\",\n                    \"pins-clusters\"\n                ]\n            });\n            if (pinFeatures && pinFeatures.length > 0) {\n                return;\n            }\n            handleZoneClick(e);\n        };\n        const handleMouseEnter = ()=>{\n            mapInstance.getCanvas().style.cursor = \"pointer\";\n        };\n        const handleMouseLeave = ()=>{\n            mapInstance.getCanvas().style.cursor = \"\";\n        };\n        const addZonesLayer = ()=>{\n            const zonesGeoJSON = {\n                type: \"FeatureCollection\",\n                features: zones.map((zone)=>({\n                        type: \"Feature\",\n                        properties: {\n                            id: zone.id,\n                            label: zone.label,\n                            level: zone.level,\n                            reason_short: zone.reason_short,\n                            reason_long: zone.reason_long\n                        },\n                        geometry: zone.geom\n                    }))\n            };\n            const source = mapInstance.getSource(\"zones\");\n            if (source) {\n                try {\n                    source.setData(zonesGeoJSON);\n                    return;\n                } catch (error) {\n                    console.error(\"Error updating zones source:\", error);\n                    if (mapInstance.getLayer(\"zones-outline\")) {\n                        mapInstance.removeLayer(\"zones-outline\");\n                    }\n                    if (mapInstance.getLayer(\"zones-layer\")) {\n                        mapInstance.removeLayer(\"zones-layer\");\n                    }\n                    mapInstance.removeSource(\"zones\");\n                }\n            }\n            mapInstance.addSource(\"zones\", {\n                type: \"geojson\",\n                data: zonesGeoJSON\n            });\n            mapInstance.addLayer({\n                id: \"zones-layer\",\n                type: \"fill\",\n                source: \"zones\",\n                paint: {\n                    \"fill-color\": [\n                        \"match\",\n                        [\n                            \"get\",\n                            \"level\"\n                        ],\n                        \"recommended\",\n                        (0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getZoneColor)(\"recommended\"),\n                        \"neutral\",\n                        (0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getZoneColor)(\"neutral\"),\n                        \"caution\",\n                        (0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getZoneColor)(\"caution\"),\n                        \"avoid\",\n                        (0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getZoneColor)(\"avoid\"),\n                        \"#cccccc\"\n                    ],\n                    \"fill-opacity\": 0.3\n                }\n            });\n            mapInstance.addLayer({\n                id: \"zones-outline\",\n                type: \"line\",\n                source: \"zones\",\n                paint: {\n                    \"line-color\": [\n                        \"match\",\n                        [\n                            \"get\",\n                            \"level\"\n                        ],\n                        \"recommended\",\n                        (0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getZoneColor)(\"recommended\"),\n                        \"neutral\",\n                        (0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getZoneColor)(\"neutral\"),\n                        \"caution\",\n                        (0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getZoneColor)(\"caution\"),\n                        \"avoid\",\n                        (0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getZoneColor)(\"avoid\"),\n                        \"#cccccc\"\n                    ],\n                    \"line-width\": 2,\n                    \"line-opacity\": 0.6\n                }\n            });\n            mapInstance.on(\"click\", \"zones-layer\", handleZoneClickWithPinCheck);\n            mapInstance.on(\"mouseenter\", \"zones-layer\", handleMouseEnter);\n            mapInstance.on(\"mouseleave\", \"zones-layer\", handleMouseLeave);\n        };\n        if (!mapInstance.isStyleLoaded()) {\n            mapInstance.once(\"style.load\", addZonesLayer);\n            return ()=>{\n                mapInstance.off(\"style.load\", addZonesLayer);\n            };\n        }\n        addZonesLayer();\n        return ()=>{\n            if (!mapInstance || !mapInstance.getStyle()) return;\n            try {\n                mapInstance.off(\"click\", \"zones-layer\", handleZoneClickWithPinCheck);\n                mapInstance.off(\"mouseenter\", \"zones-layer\", handleMouseEnter);\n                mapInstance.off(\"mouseleave\", \"zones-layer\", handleMouseLeave);\n                if (mapInstance.getLayer(\"zones-outline\")) {\n                    mapInstance.removeLayer(\"zones-outline\");\n                }\n                if (mapInstance.getLayer(\"zones-layer\")) {\n                    mapInstance.removeLayer(\"zones-layer\");\n                }\n                if (mapInstance.getSource(\"zones\")) {\n                    mapInstance.removeSource(\"zones\");\n                }\n            } catch (error) {\n            // ignore\n            }\n        };\n    }, [\n        mapLoaded,\n        zones\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map.current || !mapLoaded) return;\n        const mapInstance = map.current;\n        const createPinAlertSVG = (color)=>'\\n        <svg width=\"32\" height=\"40\" viewBox=\"0 0 32 40\" xmlns=\"http://www.w3.org/2000/svg\">\\n          <ellipse cx=\"16\" cy=\"38\" rx=\"4\" ry=\"2\" fill=\"rgba(0,0,0,0.2)\"/>\\n          <path d=\"M16 0C7.163 0 0 7.163 0 16c0 8.837 16 24 16 24s16-15.163 16-24C32 7.163 24.837 0 16 0z\" fill=\"'.concat(color, '\" stroke=\"#ffffff\" stroke-width=\"2\"/>\\n          <path d=\"M16 8L8 20h16L16 8z\" fill=\"#ffffff\" stroke=\"').concat(color, '\" stroke-width=\"1.5\" stroke-linejoin=\"round\"/>\\n          <path d=\"M16 12v4M16 18h.01\" stroke=\"').concat(color, '\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\\n        </svg>');\n        const loadIcons = (callback)=>{\n            const iconImages = [\n                {\n                    name: \"scam-icon\",\n                    svg: createPinAlertSVG((0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getPinColor)(\"scam\"))\n                },\n                {\n                    name: \"harassment-icon\",\n                    svg: createPinAlertSVG((0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getPinColor)(\"harassment\"))\n                },\n                {\n                    name: \"overcharge-icon\",\n                    svg: createPinAlertSVG((0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getPinColor)(\"overcharge\"))\n                },\n                {\n                    name: \"other-icon\",\n                    svg: createPinAlertSVG((0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getPinColor)(\"other\"))\n                },\n                {\n                    name: \"default-pin-icon\",\n                    svg: createPinAlertSVG((0,_lib_map_utils__WEBPACK_IMPORTED_MODULE_3__.getPinColor)(\"default\"))\n                }\n            ];\n            let loadedCount = 0;\n            const totalIcons = iconImages.length;\n            let callbackCalled = false;\n            const checkComplete = ()=>{\n                if (loadedCount === totalIcons && !callbackCalled && callback) {\n                    callbackCalled = true;\n                    callback();\n                }\n            };\n            iconImages.forEach((icon)=>{\n                if (mapInstance.hasImage(icon.name)) {\n                    loadedCount++;\n                    checkComplete();\n                    return;\n                }\n                const img = new Image();\n                img.onload = ()=>{\n                    try {\n                        if (!mapInstance.hasImage(icon.name)) {\n                            mapInstance.addImage(icon.name, img);\n                        }\n                    } catch (error) {\n                        console.error(\"Error adding icon \".concat(icon.name, \" to map:\"), error);\n                    }\n                    loadedCount++;\n                    checkComplete();\n                };\n                img.onerror = ()=>{\n                    console.error(\"Error loading icon \".concat(icon.name));\n                    loadedCount++;\n                    checkComplete();\n                };\n                img.src = \"data:image/svg+xml;charset=utf-8,\".concat(encodeURIComponent(icon.svg));\n            });\n        };\n        const validPins = pins.filter((pin)=>{\n            if (!pin.location || !pin.location.coordinates) {\n                console.warn(\"[MapView] Pin missing location:\", pin.id, pin);\n                return false;\n            }\n            const coords = pin.location.coordinates;\n            if (!Array.isArray(coords) || coords.length !== 2) {\n                console.warn(\"[MapView] Pin has invalid coordinates format:\", pin.id, coords);\n                return false;\n            }\n            const [lng, lat] = coords;\n            if (typeof lng !== \"number\" || typeof lat !== \"number\" || Number.isNaN(lng) || Number.isNaN(lat) || lng < -180 || lng > 180 || lat < -90 || lat > 90) {\n                console.warn(\"[MapView] Pin has invalid coordinates values:\", pin.id, coords);\n                return false;\n            }\n            return true;\n        });\n        const pinsGeoJSON = {\n            type: \"FeatureCollection\",\n            features: validPins.map((pin)=>({\n                    type: \"Feature\",\n                    properties: {\n                        id: pin.id,\n                        type: pin.type,\n                        title: pin.title,\n                        summary: pin.summary,\n                        details: pin.details,\n                        city_id: pin.city_id,\n                        status: pin.status,\n                        source: pin.source,\n                        created_at: pin.created_at,\n                        _pinData: pin\n                    },\n                    geometry: {\n                        type: \"Point\",\n                        coordinates: pin.location.coordinates\n                    }\n                }))\n        };\n        const ensureLayers = (data)=>{\n            const source = mapInstance.getSource(\"pins\");\n            if (source) {\n                try {\n                    source.setData(data);\n                } catch (error) {\n                    console.error(\"Error updating pins source:\", error);\n                    if (mapInstance.getLayer(\"pins-clusters\")) {\n                        mapInstance.removeLayer(\"pins-clusters\");\n                    }\n                    if (mapInstance.getLayer(\"pins-count\")) {\n                        mapInstance.removeLayer(\"pins-count\");\n                    }\n                    if (mapInstance.getLayer(\"pins-unclustered\")) {\n                        mapInstance.removeLayer(\"pins-unclustered\");\n                    }\n                    mapInstance.removeSource(\"pins\");\n                    mapInstance.addSource(\"pins\", {\n                        type: \"geojson\",\n                        data,\n                        cluster: true,\n                        clusterMaxZoom: 14,\n                        clusterRadius: 50\n                    });\n                }\n            } else {\n                mapInstance.addSource(\"pins\", {\n                    type: \"geojson\",\n                    data,\n                    cluster: true,\n                    clusterMaxZoom: 14,\n                    clusterRadius: 50\n                });\n            }\n            if (!mapInstance.getLayer(\"pins-clusters\")) {\n                mapInstance.addLayer({\n                    id: \"pins-clusters\",\n                    type: \"circle\",\n                    source: \"pins\",\n                    filter: [\n                        \"has\",\n                        \"point_count\"\n                    ],\n                    paint: {\n                        \"circle-color\": [\n                            \"step\",\n                            [\n                                \"get\",\n                                \"point_count\"\n                            ],\n                            \"#F59E0B\",\n                            10,\n                            \"#F97316\",\n                            50,\n                            \"#DC2626\"\n                        ],\n                        \"circle-radius\": [\n                            \"step\",\n                            [\n                                \"get\",\n                                \"point_count\"\n                            ],\n                            20,\n                            10,\n                            28,\n                            50,\n                            38\n                        ],\n                        \"circle-stroke-width\": 3,\n                        \"circle-stroke-color\": \"#ffffff\",\n                        \"circle-opacity\": 0.85\n                    }\n                });\n            }\n            if (!mapInstance.getLayer(\"pins-count\")) {\n                mapInstance.addLayer({\n                    id: \"pins-count\",\n                    type: \"symbol\",\n                    source: \"pins\",\n                    filter: [\n                        \"has\",\n                        \"point_count\"\n                    ],\n                    layout: {\n                        \"text-field\": \"{point_count_abbreviated}\",\n                        \"text-font\": [\n                            \"DIN Offc Pro Medium\",\n                            \"Arial Unicode MS Bold\"\n                        ],\n                        \"text-size\": 14\n                    },\n                    paint: {\n                        \"text-color\": \"#ffffff\"\n                    }\n                });\n            }\n            const addUnclusteredLayer = ()=>{\n                if (mapInstance.getLayer(\"pins-unclustered\")) return;\n                const requiredIcons = [\n                    \"scam-icon\",\n                    \"harassment-icon\",\n                    \"overcharge-icon\",\n                    \"other-icon\",\n                    \"default-pin-icon\"\n                ];\n                const allIconsLoaded = requiredIcons.every((name)=>mapInstance.hasImage(name));\n                if (!allIconsLoaded) {\n                    setTimeout(()=>{\n                        if (mapInstance.getSource(\"pins\") && !mapInstance.getLayer(\"pins-unclustered\")) {\n                            addUnclusteredLayer();\n                        }\n                    }, 100);\n                    return;\n                }\n                mapInstance.addLayer({\n                    id: \"pins-unclustered\",\n                    type: \"symbol\",\n                    source: \"pins\",\n                    filter: [\n                        \"!\",\n                        [\n                            \"has\",\n                            \"point_count\"\n                        ]\n                    ],\n                    layout: {\n                        \"icon-image\": [\n                            \"coalesce\",\n                            [\n                                \"match\",\n                                [\n                                    \"get\",\n                                    \"type\"\n                                ],\n                                \"scam\",\n                                \"scam-icon\",\n                                \"harassment\",\n                                \"harassment-icon\",\n                                \"overcharge\",\n                                \"overcharge-icon\",\n                                \"other\",\n                                \"other-icon\",\n                                \"default-pin-icon\"\n                            ],\n                            \"default-pin-icon\"\n                        ],\n                        \"icon-size\": 1,\n                        \"icon-anchor\": \"bottom\",\n                        \"icon-allow-overlap\": true\n                    }\n                });\n            };\n            if (!mapInstance.getLayer(\"pins-unclustered\")) {\n                loadIcons(addUnclusteredLayer);\n                const requiredIcons = [\n                    \"scam-icon\",\n                    \"harassment-icon\",\n                    \"overcharge-icon\",\n                    \"other-icon\",\n                    \"default-pin-icon\"\n                ];\n                if (requiredIcons.every((name)=>mapInstance.hasImage(name))) {\n                    addUnclusteredLayer();\n                }\n            }\n        };\n        ensureLayers(validPins.length > 0 ? pinsGeoJSON : {\n            type: \"FeatureCollection\",\n            features: []\n        });\n        const handleClusterClick = (e)=>{\n            var _features__properties;\n            const features = mapInstance.queryRenderedFeatures(e.point, {\n                layers: [\n                    \"pins-clusters\"\n                ]\n            });\n            if (!features.length) return;\n            const clusterId = (_features__properties = features[0].properties) === null || _features__properties === void 0 ? void 0 : _features__properties.cluster_id;\n            const source = mapInstance.getSource(\"pins\");\n            source.getClusterExpansionZoom(clusterId, (err, zoom)=>{\n                if (err || !mapInstance) return;\n                const coordinates = features[0].geometry.coordinates;\n                mapInstance.easeTo({\n                    center: coordinates,\n                    zoom: zoom || 15\n                });\n            });\n        };\n        const handlePinClick = (e)=>{\n            if (!e.features || !e.features[0] || !onPinClickRef.current) return;\n            const properties = e.features[0].properties;\n            if (!properties) return;\n            let pinData = properties._pinData;\n            if (!pinData || !pinData.id) {\n                const pinId = properties.id;\n                if (pinId) {\n                    pinData = pins.find((p)=>p.id === pinId);\n                    if (!pinData && properties) {\n                        const coords = e.features[0].geometry.coordinates;\n                        pinData = {\n                            id: properties.id,\n                            city_id: properties.city_id || 0,\n                            type: properties.type || \"other\",\n                            title: properties.title || \"Unknown\",\n                            summary: properties.summary || \"\",\n                            details: properties.details || null,\n                            location: {\n                                type: \"Point\",\n                                coordinates: coords\n                            },\n                            status: properties.status || \"approved\",\n                            source: properties.source || \"user\",\n                            created_at: properties.created_at || new Date().toISOString()\n                        };\n                    }\n                }\n            }\n            if (pinData) {\n                onPinClickRef.current(pinData);\n            } else {\n                console.warn(\"Could not find pin data for click:\", properties);\n            }\n        };\n        const handleMouseEnter = ()=>{\n            mapInstance.getCanvas().style.cursor = \"pointer\";\n        };\n        const handleMouseLeave = ()=>{\n            mapInstance.getCanvas().style.cursor = \"\";\n        };\n        mapInstance.off(\"click\", \"pins-clusters\");\n        mapInstance.off(\"click\", \"pins-unclustered\");\n        mapInstance.off(\"mouseenter\", \"pins-clusters\");\n        mapInstance.off(\"mouseleave\", \"pins-clusters\");\n        mapInstance.off(\"mouseenter\", \"pins-unclustered\");\n        mapInstance.off(\"mouseleave\", \"pins-unclustered\");\n        mapInstance.on(\"click\", \"pins-clusters\", handleClusterClick);\n        mapInstance.on(\"click\", \"pins-unclustered\", handlePinClick);\n        mapInstance.on(\"mouseenter\", \"pins-clusters\", handleMouseEnter);\n        mapInstance.on(\"mouseleave\", \"pins-clusters\", handleMouseLeave);\n        mapInstance.on(\"mouseenter\", \"pins-unclustered\", handleMouseEnter);\n        mapInstance.on(\"mouseleave\", \"pins-unclustered\", handleMouseLeave);\n        return ()=>{\n            if (!mapInstance || !mapInstance.getStyle()) return;\n            try {\n                mapInstance.off(\"click\", \"pins-clusters\", handleClusterClick);\n                mapInstance.off(\"click\", \"pins-unclustered\", handlePinClick);\n                mapInstance.off(\"mouseenter\", \"pins-clusters\", handleMouseEnter);\n                mapInstance.off(\"mouseleave\", \"pins-clusters\", handleMouseLeave);\n                mapInstance.off(\"mouseenter\", \"pins-unclustered\", handleMouseEnter);\n                mapInstance.off(\"mouseleave\", \"pins-unclustered\", handleMouseLeave);\n                if (mapInstance.getLayer(\"pins-clusters\")) {\n                    mapInstance.removeLayer(\"pins-clusters\");\n                }\n                if (mapInstance.getLayer(\"pins-count\")) {\n                    mapInstance.removeLayer(\"pins-count\");\n                }\n                if (mapInstance.getLayer(\"pins-unclustered\")) {\n                    mapInstance.removeLayer(\"pins-unclustered\");\n                }\n                if (mapInstance.getSource(\"pins\")) {\n                    mapInstance.removeSource(\"pins\");\n                }\n            } catch (error) {\n            // ignore\n            }\n        };\n    }, [\n        mapLoaded,\n        pins\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        var _map_current;\n        if (!map.current || !mapLoaded || !userLocation) return;\n        const el = document.createElement(\"div\");\n        el.className = \"user-location-marker\";\n        el.style.width = \"16px\";\n        el.style.height = \"16px\";\n        el.style.borderRadius = \"50%\";\n        el.style.backgroundColor = \"#4A90E2\";\n        el.style.border = \"3px solid white\";\n        el.style.boxShadow = \"0 0 10px rgba(74, 144, 226, 0.8)\";\n        const marker = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default().Marker)(el).setLngLat([\n            userLocation.longitude,\n            userLocation.latitude\n        ]).addTo(map.current);\n        (_map_current = map.current) === null || _map_current === void 0 ? void 0 : _map_current.flyTo({\n            center: [\n                userLocation.longitude,\n                userLocation.latitude\n            ],\n            zoom: 14,\n            duration: 1000\n        });\n        return ()=>{\n            try {\n                marker.remove();\n            } catch (e) {\n            // marker already removed\n            }\n        };\n    }, [\n        mapLoaded,\n        userLocation\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: mapContainer,\n        className: \"relative h-full w-full \".concat(className),\n        style: {\n            minHeight: \"400px\"\n        }\n    }, void 0, false, {\n        fileName: \"/Users/pattarathonnopwattanapong/Kong/startup/ParkD/components/MapView.tsx\",\n        lineNumber: 757,\n        columnNumber: 7\n    }, undefined);\n}, \"vvXNgN8vZJ9EggdNSxh5Wle6uLI=\")), \"vvXNgN8vZJ9EggdNSxh5Wle6uLI=\");\n_c1 = MapView;\nMapView.displayName = \"MapView\";\n/* harmony default export */ __webpack_exports__[\"default\"] = (MapView);\nvar _c, _c1;\n$RefreshReg$(_c, \"MapView$forwardRef\");\n$RefreshReg$(_c1, \"MapView\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvTWFwVmlldy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRTRGO0FBQzNEO0FBYTJCO0FBRTVETSw4REFBb0IsR0FBR0ksMkZBQW9DLElBQUksQ0FBRTtBQUVqRSxNQUFNRyx3QkFBVVIsR0FBQUEsaURBQVVBLFNBQ3hCLFFBYUVTO1FBWkEsRUFDRUMsS0FBSyxFQUNMQyxJQUFJLEVBQ0pDLFNBQVM7UUFBQztRQUFVO0tBQVEsRUFDNUJDLFlBQVksRUFDWkMsV0FBVyxFQUNYQyxVQUFVLEVBQ1ZDLGdCQUFnQixFQUNoQkMsU0FBUyxFQUNUQyxZQUFZLEVBQUUsRUFDZEMsY0FBYyxLQUFLLEVBQ3BCOztJQUdELE1BQU1DLGVBQWV0Qiw2Q0FBTUEsQ0FBaUI7SUFDNUMsTUFBTXVCLE1BQU12Qiw2Q0FBTUEsQ0FBc0I7SUFDeEMsTUFBTSxDQUFDd0IsV0FBV0MsYUFBYSxHQUFHeEIsK0NBQVFBLENBQUM7SUFFM0MsTUFBTXlCLGlCQUFpQjFCLDZDQUFNQSxDQUFDZ0I7SUFDOUIsTUFBTVcsZ0JBQWdCM0IsNkNBQU1BLENBQUNpQjtJQUM3QixNQUFNVyxzQkFBc0I1Qiw2Q0FBTUEsQ0FBQ2tCO0lBRW5DcEIsZ0RBQVNBLENBQUM7UUFDUjRCLGVBQWVHLE9BQU8sR0FBR2I7UUFDekJXLGNBQWNFLE9BQU8sR0FBR1o7UUFDeEJXLG9CQUFvQkMsT0FBTyxHQUFHWDtJQUNoQyxHQUFHO1FBQUNEO1FBQVlDO1FBQWtCRjtLQUFZO0lBRTlDakIsMERBQW1CQSxDQUNqQlksS0FDQSxJQUFPO1lBQ0xtQixZQUFZLENBQUNDO2dCQUNYLElBQUksQ0FBQ1IsSUFBSU0sT0FBTyxJQUFJLENBQUNMLFdBQVc7Z0JBRWhDLElBQUk7b0JBQ0YsTUFBTVEsY0FBY0QsS0FBS0UsSUFBSSxDQUFDRCxXQUFXLENBQUMsRUFBRTtvQkFDNUMsTUFBTUUsU0FBU0YsWUFBWUcsTUFBTSxDQUMvQixDQUFDQyxLQUFLQyxRQUNKRCxJQUFJ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SyxhQUFhK0ssUUFBUTthQUFDO1lBQ3ZEdEksTUFBTTtZQUNOVCxVQUFVO1FBQ1o7UUFFQSxPQUFPO1lBQ0wsSUFBSTtnQkFDRjJJLE9BQU9oSCxNQUFNO1lBQ2YsRUFBRSxVQUFNO1lBQ04seUJBQXlCO1lBQzNCO1FBQ0Y7SUFDRixHQUFHO1FBQUNsRDtRQUFXVDtLQUFhO0lBRTVCLHFCQUNFLDhEQUFDaUw7UUFDQ3JMLEtBQUtXO1FBQ0xGLFdBQVcsMEJBQW9DLE9BQVZBO1FBQ3JDd0MsT0FBTztZQUFFcUksV0FBVztRQUFROzs7Ozs7QUFHbEM7O0FBR0Z2TCxRQUFRd0wsV0FBVyxHQUFHO0FBRXRCLCtEQUFleEwsT0FBT0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL01hcFZpZXcudHN4PzA2NTgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZUltcGVyYXRpdmVIYW5kbGUsIHVzZVJlZiwgdXNlU3RhdGUsIGZvcndhcmRSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBtYXBib3hnbCBmcm9tIFwibWFwYm94LWdsXCI7XG5pbXBvcnQgdHlwZSB7IEdlb0pTT04gfSBmcm9tIFwiZ2VvanNvblwiO1xuXG5pbXBvcnQgdHlwZSB7XG4gIE1hcFZpZXdSZWYsXG4gIE1hcFZpZXdQcm9wcyxcbiAgWm9uZSxcbiAgUGluLFxuICBVc2VyTG9jYXRpb24sXG4gIFBpblR5cGUsXG4gIFBpblN0YXR1cyxcbiAgUGluU291cmNlXG59IGZyb20gXCJAL3R5cGVzL21hcFwiO1xuaW1wb3J0IHsgZ2V0UGluQ29sb3IsIGdldFpvbmVDb2xvciB9IGZyb20gXCJAL2xpYi9tYXAtdXRpbHNcIjtcblxubWFwYm94Z2wuYWNjZXNzVG9rZW4gPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19NQVBCT1hfVE9LRU4gfHwgXCJcIjtcblxuY29uc3QgTWFwVmlldyA9IGZvcndhcmRSZWY8TWFwVmlld1JlZiwgTWFwVmlld1Byb3BzPihcbiAgKFxuICAgIHtcbiAgICAgIHpvbmVzLFxuICAgICAgcGlucyxcbiAgICAgIGNlbnRlciA9IFsxMDAuNTAxOCwgMTMuNzU2M10sXG4gICAgICB1c2VyTG9jYXRpb24sXG4gICAgICBvblpvbmVDbGljayxcbiAgICAgIG9uUGluQ2xpY2ssXG4gICAgICBvblZpZXdwb3J0Q2hhbmdlLFxuICAgICAgbWF4Qm91bmRzLFxuICAgICAgY2xhc3NOYW1lID0gXCJcIixcbiAgICAgIGRpc2FibGVab29tID0gZmFsc2VcbiAgICB9LFxuICAgIHJlZlxuICApID0+IHtcbiAgICBjb25zdCBtYXBDb250YWluZXIgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICAgIGNvbnN0IG1hcCA9IHVzZVJlZjxtYXBib3hnbC5NYXAgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbbWFwTG9hZGVkLCBzZXRNYXBMb2FkZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gICAgY29uc3Qgb25ab25lQ2xpY2tSZWYgPSB1c2VSZWYob25ab25lQ2xpY2spO1xuICAgIGNvbnN0IG9uUGluQ2xpY2tSZWYgPSB1c2VSZWYob25QaW5DbGljayk7XG4gICAgY29uc3Qgb25WaWV3cG9ydENoYW5nZVJlZiA9IHVzZVJlZihvblZpZXdwb3J0Q2hhbmdlKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBvblpvbmVDbGlja1JlZi5jdXJyZW50ID0gb25ab25lQ2xpY2s7XG4gICAgICBvblBpbkNsaWNrUmVmLmN1cnJlbnQgPSBvblBpbkNsaWNrO1xuICAgICAgb25WaWV3cG9ydENoYW5nZVJlZi5jdXJyZW50ID0gb25WaWV3cG9ydENoYW5nZTtcbiAgICB9LCBbb25QaW5DbGljaywgb25WaWV3cG9ydENoYW5nZSwgb25ab25lQ2xpY2tdKTtcblxuICAgIHVzZUltcGVyYXRpdmVIYW5kbGUoXG4gICAgICByZWYsXG4gICAgICAoKSA9PiAoe1xuICAgICAgICB6b29tVG9ab25lOiAoem9uZTogWm9uZSkgPT4ge1xuICAgICAgICAgIGlmICghbWFwLmN1cnJlbnQgfHwgIW1hcExvYWRlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gem9uZS5nZW9tLmNvb3JkaW5hdGVzWzBdIGFzIG51bWJlcltdW107XG4gICAgICAgICAgICBjb25zdCBib3VuZHMgPSBjb29yZGluYXRlcy5yZWR1Y2UoXG4gICAgICAgICAgICAgIChhY2MsIGNvb3JkKSA9PlxuICAgICAgICAgICAgICAgIGFjYy5leHRlbmQoY29vcmQgYXMgW251bWJlciwgbnVtYmVyXSksXG4gICAgICAgICAgICAgIG5ldyBtYXBib3hnbC5MbmdMYXRCb3VuZHMoXG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXNbMF0gYXMgW251bWJlciwgbnVtYmVyXSxcbiAgICAgICAgICAgICAgICBjb29yZGluYXRlc1swXSBhcyBbbnVtYmVyLCBudW1iZXJdXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIG1hcC5jdXJyZW50LmZpdEJvdW5kcyhib3VuZHMsIHtcbiAgICAgICAgICAgICAgcGFkZGluZzogeyB0b3A6IDUwLCBib3R0b206IDUwLCBsZWZ0OiA1MCwgcmlnaHQ6IDUwIH0sXG4gICAgICAgICAgICAgIG1heFpvb206IDE1LFxuICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB6b29taW5nIHRvIHpvbmU6XCIsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHpvb21Ub1BpbjogKHBpbjogUGluKSA9PiB7XG4gICAgICAgICAgaWYgKCFtYXAuY3VycmVudCB8fCAhbWFwTG9hZGVkKSByZXR1cm47XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgW2xuZywgbGF0XSA9IHBpbi5sb2NhdGlvbi5jb29yZGluYXRlcztcbiAgICAgICAgICAgIG1hcC5jdXJyZW50LmZseVRvKHtcbiAgICAgICAgICAgICAgY2VudGVyOiBbbG5nLCBsYXRdLFxuICAgICAgICAgICAgICB6b29tOiAxNixcbiAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igem9vbWluZyB0byBwaW46XCIsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHpvb21Ub0xvY2F0aW9uOiAobG5nOiBudW1iZXIsIGxhdDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgaWYgKCFtYXAuY3VycmVudCB8fCAhbWFwTG9hZGVkKSByZXR1cm47XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbWFwLmN1cnJlbnQuZmx5VG8oe1xuICAgICAgICAgICAgICBjZW50ZXI6IFtsbmcsIGxhdF0sXG4gICAgICAgICAgICAgIHpvb206IDE0LFxuICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB6b29taW5nIHRvIGxvY2F0aW9uOlwiLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIFttYXBMb2FkZWRdXG4gICAgKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoIW1hcENvbnRhaW5lci5jdXJyZW50IHx8IG1hcC5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgIG1hcC5jdXJyZW50ID0gbmV3IG1hcGJveGdsLk1hcCh7XG4gICAgICAgIGNvbnRhaW5lcjogbWFwQ29udGFpbmVyLmN1cnJlbnQsXG4gICAgICAgIHN0eWxlOiBcIm1hcGJveDovL3N0eWxlcy9tYXBib3gvbGlnaHQtdjExXCIsXG4gICAgICAgIGNlbnRlcixcbiAgICAgICAgem9vbTogMTIsXG4gICAgICAgIC4uLihtYXhCb3VuZHMgPyB7IG1heEJvdW5kcyB9IDoge30pLFxuICAgICAgICAuLi4oZGlzYWJsZVpvb21cbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgaW50ZXJhY3RpdmU6IGZhbHNlLFxuICAgICAgICAgICAgICBzY3JvbGxab29tOiBmYWxzZSxcbiAgICAgICAgICAgICAgYm94Wm9vbTogZmFsc2UsXG4gICAgICAgICAgICAgIGRyYWdSb3RhdGU6IGZhbHNlLFxuICAgICAgICAgICAgICBkcmFnUGFuOiBmYWxzZSxcbiAgICAgICAgICAgICAga2V5Ym9hcmQ6IGZhbHNlLFxuICAgICAgICAgICAgICBkb3VibGVDbGlja1pvb206IGZhbHNlLFxuICAgICAgICAgICAgICB0b3VjaFpvb21Sb3RhdGU6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7fSlcbiAgICAgIH0pO1xuXG4gICAgICBtYXAuY3VycmVudC5vbihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICBzZXRNYXBMb2FkZWQodHJ1ZSk7XG4gICAgICAgIGlmIChvblZpZXdwb3J0Q2hhbmdlUmVmLmN1cnJlbnQgJiYgbWFwLmN1cnJlbnQpIHtcbiAgICAgICAgICBjb25zdCBib3VuZHMgPSBtYXAuY3VycmVudC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICBpZiAoYm91bmRzKSB7XG4gICAgICAgICAgICBvblZpZXdwb3J0Q2hhbmdlUmVmLmN1cnJlbnQoYm91bmRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAob25WaWV3cG9ydENoYW5nZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZVZpZXdwb3J0Q2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgIGlmIChtYXAuY3VycmVudCAmJiBvblZpZXdwb3J0Q2hhbmdlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IG1hcC5jdXJyZW50LmdldEJvdW5kcygpO1xuICAgICAgICAgICAgaWYgKGJvdW5kcykge1xuICAgICAgICAgICAgICBvblZpZXdwb3J0Q2hhbmdlUmVmLmN1cnJlbnQoYm91bmRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgbWFwLmN1cnJlbnQub24oXCJtb3ZlZW5kXCIsIGhhbmRsZVZpZXdwb3J0Q2hhbmdlKTtcbiAgICAgICAgbWFwLmN1cnJlbnQub24oXCJ6b29tZW5kXCIsIGhhbmRsZVZpZXdwb3J0Q2hhbmdlKTtcbiAgICAgICAgKG1hcC5jdXJyZW50IGFzIG1hcGJveGdsLk1hcCAmIHsgX2hhbmRsZVZpZXdwb3J0Q2hhbmdlPzogKCkgPT4gdm9pZCB9KS5faGFuZGxlVmlld3BvcnRDaGFuZ2UgPVxuICAgICAgICAgIGhhbmRsZVZpZXdwb3J0Q2hhbmdlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAobWFwLmN1cnJlbnQpIHtcbiAgICAgICAgICBjb25zdCBoYW5kbGVWaWV3cG9ydENoYW5nZSA9IChtYXAuY3VycmVudCBhcyBtYXBib3hnbC5NYXAgJiB7XG4gICAgICAgICAgICBfaGFuZGxlVmlld3BvcnRDaGFuZ2U/OiAoKSA9PiB2b2lkO1xuICAgICAgICAgIH0pLl9oYW5kbGVWaWV3cG9ydENoYW5nZTtcbiAgICAgICAgICBpZiAoaGFuZGxlVmlld3BvcnRDaGFuZ2UpIHtcbiAgICAgICAgICAgIG1hcC5jdXJyZW50Lm9mZihcIm1vdmVlbmRcIiwgaGFuZGxlVmlld3BvcnRDaGFuZ2UpO1xuICAgICAgICAgICAgbWFwLmN1cnJlbnQub2ZmKFwiem9vbWVuZFwiLCBoYW5kbGVWaWV3cG9ydENoYW5nZSk7XG4gICAgICAgICAgICBkZWxldGUgKG1hcC5jdXJyZW50IGFzIG1hcGJveGdsLk1hcCAmIHsgX2hhbmRsZVZpZXdwb3J0Q2hhbmdlPzogKCkgPT4gdm9pZCB9KVxuICAgICAgICAgICAgICAuX2hhbmRsZVZpZXdwb3J0Q2hhbmdlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYXAuY3VycmVudD8ucmVtb3ZlKCk7XG4gICAgICAgIG1hcC5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH07XG4gICAgfSwgW2NlbnRlciwgZGlzYWJsZVpvb20sIG1heEJvdW5kc10pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmICghbWFwLmN1cnJlbnQgfHwgIW1hcExvYWRlZCkgcmV0dXJuO1xuXG4gICAgICBpZiAobWF4Qm91bmRzKSB7XG4gICAgICAgIG1hcC5jdXJyZW50LnNldE1heEJvdW5kcyhtYXhCb3VuZHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKG1hcC5jdXJyZW50LnNldE1heEJvdW5kcyBhcyB1bmtub3duIGFzIChib3VuZHM/OiBtYXBib3hnbC5MbmdMYXRCb3VuZHNMaWtlIHwgbnVsbCkgPT4gdm9pZCkoXG4gICAgICAgICAgbnVsbFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sIFttYXBMb2FkZWQsIG1heEJvdW5kc10pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmICghbWFwLmN1cnJlbnQgfHwgIW1hcExvYWRlZCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBtYXBJbnN0YW5jZSA9IG1hcC5jdXJyZW50O1xuXG4gICAgICBjb25zdCBoYW5kbGVab25lQ2xpY2sgPSAoZTogbWFwYm94Z2wuTWFwTGF5ZXJNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChlLmZlYXR1cmVzICYmIGUuZmVhdHVyZXNbMF0gJiYgb25ab25lQ2xpY2tSZWYuY3VycmVudCkge1xuICAgICAgICAgIGNvbnN0IGZlYXR1cmUgPSBlLmZlYXR1cmVzWzBdO1xuICAgICAgICAgIGNvbnN0IHpvbmVEYXRhID0gem9uZXMuZmluZCgoeikgPT4gei5pZCA9PT0gZmVhdHVyZS5wcm9wZXJ0aWVzPy5pZCk7XG4gICAgICAgICAgaWYgKHpvbmVEYXRhKSB7XG4gICAgICAgICAgICBvblpvbmVDbGlja1JlZi5jdXJyZW50KHpvbmVEYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGhhbmRsZVpvbmVDbGlja1dpdGhQaW5DaGVjayA9IChlOiBtYXBib3hnbC5NYXBMYXllck1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgY2xpY2tlZFBvaW50ID0gZS5wb2ludDtcbiAgICAgICAgY29uc3QgcGluRmVhdHVyZXMgPSBtYXBJbnN0YW5jZS5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoY2xpY2tlZFBvaW50LCB7XG4gICAgICAgICAgbGF5ZXJzOiBbXCJwaW5zLXVuY2x1c3RlcmVkXCIsIFwicGlucy1jbHVzdGVyc1wiXVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocGluRmVhdHVyZXMgJiYgcGluRmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGhhbmRsZVpvbmVDbGljayhlKTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGhhbmRsZU1vdXNlRW50ZXIgPSAoKSA9PiB7XG4gICAgICAgIG1hcEluc3RhbmNlLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgaGFuZGxlTW91c2VMZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgbWFwSW5zdGFuY2UuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gXCJcIjtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGFkZFpvbmVzTGF5ZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHpvbmVzR2VvSlNPTjogR2VvSlNPTi5GZWF0dXJlQ29sbGVjdGlvbjxHZW9KU09OLkdlb21ldHJ5PiA9IHtcbiAgICAgICAgICB0eXBlOiBcIkZlYXR1cmVDb2xsZWN0aW9uXCIsXG4gICAgICAgICAgZmVhdHVyZXM6IHpvbmVzLm1hcCgoem9uZSkgPT4gKHtcbiAgICAgICAgICAgIHR5cGU6IFwiRmVhdHVyZVwiLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBpZDogem9uZS5pZCxcbiAgICAgICAgICAgICAgbGFiZWw6IHpvbmUubGFiZWwsXG4gICAgICAgICAgICAgIGxldmVsOiB6b25lLmxldmVsLFxuICAgICAgICAgICAgICByZWFzb25fc2hvcnQ6IHpvbmUucmVhc29uX3Nob3J0LFxuICAgICAgICAgICAgICByZWFzb25fbG9uZzogem9uZS5yZWFzb25fbG9uZ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdlb21ldHJ5OiB6b25lLmdlb21cbiAgICAgICAgICB9KSlcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzb3VyY2UgPSBtYXBJbnN0YW5jZS5nZXRTb3VyY2UoXCJ6b25lc1wiKSBhcyBtYXBib3hnbC5HZW9KU09OU291cmNlIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNvdXJjZS5zZXREYXRhKHpvbmVzR2VvSlNPTik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyB6b25lcyBzb3VyY2U6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIGlmIChtYXBJbnN0YW5jZS5nZXRMYXllcihcInpvbmVzLW91dGxpbmVcIikpIHtcbiAgICAgICAgICAgICAgbWFwSW5zdGFuY2UucmVtb3ZlTGF5ZXIoXCJ6b25lcy1vdXRsaW5lXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1hcEluc3RhbmNlLmdldExheWVyKFwiem9uZXMtbGF5ZXJcIikpIHtcbiAgICAgICAgICAgICAgbWFwSW5zdGFuY2UucmVtb3ZlTGF5ZXIoXCJ6b25lcy1sYXllclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hcEluc3RhbmNlLnJlbW92ZVNvdXJjZShcInpvbmVzXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG1hcEluc3RhbmNlLmFkZFNvdXJjZShcInpvbmVzXCIsIHtcbiAgICAgICAgICB0eXBlOiBcImdlb2pzb25cIixcbiAgICAgICAgICBkYXRhOiB6b25lc0dlb0pTT05cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWFwSW5zdGFuY2UuYWRkTGF5ZXIoe1xuICAgICAgICAgIGlkOiBcInpvbmVzLWxheWVyXCIsXG4gICAgICAgICAgdHlwZTogXCJmaWxsXCIsXG4gICAgICAgICAgc291cmNlOiBcInpvbmVzXCIsXG4gICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgIFwiZmlsbC1jb2xvclwiOiBbXG4gICAgICAgICAgICAgIFwibWF0Y2hcIixcbiAgICAgICAgICAgICAgW1wiZ2V0XCIsIFwibGV2ZWxcIl0sXG4gICAgICAgICAgICAgIFwicmVjb21tZW5kZWRcIixcbiAgICAgICAgICAgICAgZ2V0Wm9uZUNvbG9yKFwicmVjb21tZW5kZWRcIiksXG4gICAgICAgICAgICAgIFwibmV1dHJhbFwiLFxuICAgICAgICAgICAgICBnZXRab25lQ29sb3IoXCJuZXV0cmFsXCIpLFxuICAgICAgICAgICAgICBcImNhdXRpb25cIixcbiAgICAgICAgICAgICAgZ2V0Wm9uZUNvbG9yKFwiY2F1dGlvblwiKSxcbiAgICAgICAgICAgICAgXCJhdm9pZFwiLFxuICAgICAgICAgICAgICBnZXRab25lQ29sb3IoXCJhdm9pZFwiKSxcbiAgICAgICAgICAgICAgXCIjY2NjY2NjXCJcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcImZpbGwtb3BhY2l0eVwiOiAwLjNcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1hcEluc3RhbmNlLmFkZExheWVyKHtcbiAgICAgICAgICBpZDogXCJ6b25lcy1vdXRsaW5lXCIsXG4gICAgICAgICAgdHlwZTogXCJsaW5lXCIsXG4gICAgICAgICAgc291cmNlOiBcInpvbmVzXCIsXG4gICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgIFwibGluZS1jb2xvclwiOiBbXG4gICAgICAgICAgICAgIFwibWF0Y2hcIixcbiAgICAgICAgICAgICAgW1wiZ2V0XCIsIFwibGV2ZWxcIl0sXG4gICAgICAgICAgICAgIFwicmVjb21tZW5kZWRcIixcbiAgICAgICAgICAgICAgZ2V0Wm9uZUNvbG9yKFwicmVjb21tZW5kZWRcIiksXG4gICAgICAgICAgICAgIFwibmV1dHJhbFwiLFxuICAgICAgICAgICAgICBnZXRab25lQ29sb3IoXCJuZXV0cmFsXCIpLFxuICAgICAgICAgICAgICBcImNhdXRpb25cIixcbiAgICAgICAgICAgICAgZ2V0Wm9uZUNvbG9yKFwiY2F1dGlvblwiKSxcbiAgICAgICAgICAgICAgXCJhdm9pZFwiLFxuICAgICAgICAgICAgICBnZXRab25lQ29sb3IoXCJhdm9pZFwiKSxcbiAgICAgICAgICAgICAgXCIjY2NjY2NjXCJcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcImxpbmUtd2lkdGhcIjogMixcbiAgICAgICAgICAgIFwibGluZS1vcGFjaXR5XCI6IDAuNlxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWFwSW5zdGFuY2Uub24oXCJjbGlja1wiLCBcInpvbmVzLWxheWVyXCIsIGhhbmRsZVpvbmVDbGlja1dpdGhQaW5DaGVjayk7XG4gICAgICAgIG1hcEluc3RhbmNlLm9uKFwibW91c2VlbnRlclwiLCBcInpvbmVzLWxheWVyXCIsIGhhbmRsZU1vdXNlRW50ZXIpO1xuICAgICAgICBtYXBJbnN0YW5jZS5vbihcIm1vdXNlbGVhdmVcIiwgXCJ6b25lcy1sYXllclwiLCBoYW5kbGVNb3VzZUxlYXZlKTtcbiAgICAgIH07XG5cbiAgICAgIGlmICghbWFwSW5zdGFuY2UuaXNTdHlsZUxvYWRlZCgpKSB7XG4gICAgICAgIG1hcEluc3RhbmNlLm9uY2UoXCJzdHlsZS5sb2FkXCIsIGFkZFpvbmVzTGF5ZXIpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIG1hcEluc3RhbmNlLm9mZihcInN0eWxlLmxvYWRcIiwgYWRkWm9uZXNMYXllcik7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGFkZFpvbmVzTGF5ZXIoKTtcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKCFtYXBJbnN0YW5jZSB8fCAhbWFwSW5zdGFuY2UuZ2V0U3R5bGUoKSkgcmV0dXJuO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbWFwSW5zdGFuY2Uub2ZmKFwiY2xpY2tcIiwgXCJ6b25lcy1sYXllclwiLCBoYW5kbGVab25lQ2xpY2tXaXRoUGluQ2hlY2spO1xuICAgICAgICAgIG1hcEluc3RhbmNlLm9mZihcIm1vdXNlZW50ZXJcIiwgXCJ6b25lcy1sYXllclwiLCBoYW5kbGVNb3VzZUVudGVyKTtcbiAgICAgICAgICBtYXBJbnN0YW5jZS5vZmYoXCJtb3VzZWxlYXZlXCIsIFwiem9uZXMtbGF5ZXJcIiwgaGFuZGxlTW91c2VMZWF2ZSk7XG5cbiAgICAgICAgICBpZiAobWFwSW5zdGFuY2UuZ2V0TGF5ZXIoXCJ6b25lcy1vdXRsaW5lXCIpKSB7XG4gICAgICAgICAgICBtYXBJbnN0YW5jZS5yZW1vdmVMYXllcihcInpvbmVzLW91dGxpbmVcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChtYXBJbnN0YW5jZS5nZXRMYXllcihcInpvbmVzLWxheWVyXCIpKSB7XG4gICAgICAgICAgICBtYXBJbnN0YW5jZS5yZW1vdmVMYXllcihcInpvbmVzLWxheWVyXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobWFwSW5zdGFuY2UuZ2V0U291cmNlKFwiem9uZXNcIikpIHtcbiAgICAgICAgICAgIG1hcEluc3RhbmNlLnJlbW92ZVNvdXJjZShcInpvbmVzXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBpZ25vcmVcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LCBbbWFwTG9hZGVkLCB6b25lc10pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmICghbWFwLmN1cnJlbnQgfHwgIW1hcExvYWRlZCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBtYXBJbnN0YW5jZSA9IG1hcC5jdXJyZW50O1xuXG4gICAgICBjb25zdCBjcmVhdGVQaW5BbGVydFNWRyA9IChjb2xvcjogc3RyaW5nKSA9PiBgXG4gICAgICAgIDxzdmcgd2lkdGg9XCIzMlwiIGhlaWdodD1cIjQwXCIgdmlld0JveD1cIjAgMCAzMiA0MFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgICAgICAgICA8ZWxsaXBzZSBjeD1cIjE2XCIgY3k9XCIzOFwiIHJ4PVwiNFwiIHJ5PVwiMlwiIGZpbGw9XCJyZ2JhKDAsMCwwLDAuMilcIi8+XG4gICAgICAgICAgPHBhdGggZD1cIk0xNiAwQzcuMTYzIDAgMCA3LjE2MyAwIDE2YzAgOC44MzcgMTYgMjQgMTYgMjRzMTYtMTUuMTYzIDE2LTI0QzMyIDcuMTYzIDI0LjgzNyAwIDE2IDB6XCIgZmlsbD1cIiR7Y29sb3J9XCIgc3Ryb2tlPVwiI2ZmZmZmZlwiIHN0cm9rZS13aWR0aD1cIjJcIi8+XG4gICAgICAgICAgPHBhdGggZD1cIk0xNiA4TDggMjBoMTZMMTYgOHpcIiBmaWxsPVwiI2ZmZmZmZlwiIHN0cm9rZT1cIiR7Y29sb3J9XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIi8+XG4gICAgICAgICAgPHBhdGggZD1cIk0xNiAxMnY0TTE2IDE4aC4wMVwiIHN0cm9rZT1cIiR7Y29sb3J9XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiLz5cbiAgICAgICAgPC9zdmc+YDtcblxuICAgICAgY29uc3QgbG9hZEljb25zID0gKGNhbGxiYWNrPzogKCkgPT4gdm9pZCkgPT4ge1xuICAgICAgICBjb25zdCBpY29uSW1hZ2VzID0gW1xuICAgICAgICAgIHsgbmFtZTogXCJzY2FtLWljb25cIiwgc3ZnOiBjcmVhdGVQaW5BbGVydFNWRyhnZXRQaW5Db2xvcihcInNjYW1cIikpIH0sXG4gICAgICAgICAgeyBuYW1lOiBcImhhcmFzc21lbnQtaWNvblwiLCBzdmc6IGNyZWF0ZVBpbkFsZXJ0U1ZHKGdldFBpbkNvbG9yKFwiaGFyYXNzbWVudFwiKSkgfSxcbiAgICAgICAgICB7IG5hbWU6IFwib3ZlcmNoYXJnZS1pY29uXCIsIHN2ZzogY3JlYXRlUGluQWxlcnRTVkcoZ2V0UGluQ29sb3IoXCJvdmVyY2hhcmdlXCIpKSB9LFxuICAgICAgICAgIHsgbmFtZTogXCJvdGhlci1pY29uXCIsIHN2ZzogY3JlYXRlUGluQWxlcnRTVkcoZ2V0UGluQ29sb3IoXCJvdGhlclwiKSkgfSxcbiAgICAgICAgICB7IG5hbWU6IFwiZGVmYXVsdC1waW4taWNvblwiLCBzdmc6IGNyZWF0ZVBpbkFsZXJ0U1ZHKGdldFBpbkNvbG9yKFwiZGVmYXVsdFwiKSkgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGxldCBsb2FkZWRDb3VudCA9IDA7XG4gICAgICAgIGNvbnN0IHRvdGFsSWNvbnMgPSBpY29uSW1hZ2VzLmxlbmd0aDtcbiAgICAgICAgbGV0IGNhbGxiYWNrQ2FsbGVkID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgY2hlY2tDb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICBpZiAobG9hZGVkQ291bnQgPT09IHRvdGFsSWNvbnMgJiYgIWNhbGxiYWNrQ2FsbGVkICYmIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFja0NhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpY29uSW1hZ2VzLmZvckVhY2goKGljb24pID0+IHtcbiAgICAgICAgICBpZiAobWFwSW5zdGFuY2UuaGFzSW1hZ2UoaWNvbi5uYW1lKSkge1xuICAgICAgICAgICAgbG9hZGVkQ291bnQrKztcbiAgICAgICAgICAgIGNoZWNrQ29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaWYgKCFtYXBJbnN0YW5jZS5oYXNJbWFnZShpY29uLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgbWFwSW5zdGFuY2UuYWRkSW1hZ2UoaWNvbi5uYW1lLCBpbWcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhZGRpbmcgaWNvbiAke2ljb24ubmFtZX0gdG8gbWFwOmAsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvYWRlZENvdW50Kys7XG4gICAgICAgICAgICBjaGVja0NvbXBsZXRlKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGxvYWRpbmcgaWNvbiAke2ljb24ubmFtZX1gKTtcbiAgICAgICAgICAgIGxvYWRlZENvdW50Kys7XG4gICAgICAgICAgICBjaGVja0NvbXBsZXRlKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBpbWcuc3JjID0gYGRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCR7ZW5jb2RlVVJJQ29tcG9uZW50KGljb24uc3ZnKX1gO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHZhbGlkUGlucyA9IHBpbnMuZmlsdGVyKChwaW4pID0+IHtcbiAgICAgICAgaWYgKCFwaW4ubG9jYXRpb24gfHwgIXBpbi5sb2NhdGlvbi5jb29yZGluYXRlcykge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIltNYXBWaWV3XSBQaW4gbWlzc2luZyBsb2NhdGlvbjpcIiwgcGluLmlkLCBwaW4pO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb29yZHMgPSBwaW4ubG9jYXRpb24uY29vcmRpbmF0ZXM7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShjb29yZHMpIHx8IGNvb3Jkcy5sZW5ndGggIT09IDIpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJbTWFwVmlld10gUGluIGhhcyBpbnZhbGlkIGNvb3JkaW5hdGVzIGZvcm1hdDpcIiwgcGluLmlkLCBjb29yZHMpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbbG5nLCBsYXRdID0gY29vcmRzO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGxuZyAhPT0gXCJudW1iZXJcIiB8fFxuICAgICAgICAgIHR5cGVvZiBsYXQgIT09IFwibnVtYmVyXCIgfHxcbiAgICAgICAgICBOdW1iZXIuaXNOYU4obG5nKSB8fFxuICAgICAgICAgIE51bWJlci5pc05hTihsYXQpIHx8XG4gICAgICAgICAgbG5nIDwgLTE4MCB8fFxuICAgICAgICAgIGxuZyA+IDE4MCB8fFxuICAgICAgICAgIGxhdCA8IC05MCB8fFxuICAgICAgICAgIGxhdCA+IDkwXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIltNYXBWaWV3XSBQaW4gaGFzIGludmFsaWQgY29vcmRpbmF0ZXMgdmFsdWVzOlwiLCBwaW4uaWQsIGNvb3Jkcyk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHBpbnNHZW9KU09OOiBHZW9KU09OLkZlYXR1cmVDb2xsZWN0aW9uPEdlb0pTT04uUG9pbnQ+ID0ge1xuICAgICAgICB0eXBlOiBcIkZlYXR1cmVDb2xsZWN0aW9uXCIsXG4gICAgICAgIGZlYXR1cmVzOiB2YWxpZFBpbnMubWFwKChwaW4pID0+ICh7XG4gICAgICAgICAgdHlwZTogXCJGZWF0dXJlXCIsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgaWQ6IHBpbi5pZCxcbiAgICAgICAgICAgIHR5cGU6IHBpbi50eXBlLFxuICAgICAgICAgICAgdGl0bGU6IHBpbi50aXRsZSxcbiAgICAgICAgICAgIHN1bW1hcnk6IHBpbi5zdW1tYXJ5LFxuICAgICAgICAgICAgZGV0YWlsczogcGluLmRldGFpbHMsXG4gICAgICAgICAgICBjaXR5X2lkOiBwaW4uY2l0eV9pZCxcbiAgICAgICAgICAgIHN0YXR1czogcGluLnN0YXR1cyxcbiAgICAgICAgICAgIHNvdXJjZTogcGluLnNvdXJjZSxcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHBpbi5jcmVhdGVkX2F0LFxuICAgICAgICAgICAgX3BpbkRhdGE6IHBpblxuICAgICAgICAgIH0sXG4gICAgICAgICAgZ2VvbWV0cnk6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiUG9pbnRcIixcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBwaW4ubG9jYXRpb24uY29vcmRpbmF0ZXMgYXMgW251bWJlciwgbnVtYmVyXVxuICAgICAgICAgIH1cbiAgICAgICAgfSkpXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBlbnN1cmVMYXllcnMgPSAoZGF0YTogR2VvSlNPTi5GZWF0dXJlQ29sbGVjdGlvbjxHZW9KU09OLlBvaW50PikgPT4ge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBtYXBJbnN0YW5jZS5nZXRTb3VyY2UoXCJwaW5zXCIpIGFzIG1hcGJveGdsLkdlb0pTT05Tb3VyY2UgfCB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzb3VyY2Uuc2V0RGF0YShkYXRhKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHBpbnMgc291cmNlOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBpZiAobWFwSW5zdGFuY2UuZ2V0TGF5ZXIoXCJwaW5zLWNsdXN0ZXJzXCIpKSB7XG4gICAgICAgICAgICAgIG1hcEluc3RhbmNlLnJlbW92ZUxheWVyKFwicGlucy1jbHVzdGVyc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtYXBJbnN0YW5jZS5nZXRMYXllcihcInBpbnMtY291bnRcIikpIHtcbiAgICAgICAgICAgICAgbWFwSW5zdGFuY2UucmVtb3ZlTGF5ZXIoXCJwaW5zLWNvdW50XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1hcEluc3RhbmNlLmdldExheWVyKFwicGlucy11bmNsdXN0ZXJlZFwiKSkge1xuICAgICAgICAgICAgICBtYXBJbnN0YW5jZS5yZW1vdmVMYXllcihcInBpbnMtdW5jbHVzdGVyZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXBJbnN0YW5jZS5yZW1vdmVTb3VyY2UoXCJwaW5zXCIpO1xuICAgICAgICAgICAgbWFwSW5zdGFuY2UuYWRkU291cmNlKFwicGluc1wiLCB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiZ2VvanNvblwiLFxuICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICBjbHVzdGVyOiB0cnVlLFxuICAgICAgICAgICAgICBjbHVzdGVyTWF4Wm9vbTogMTQsXG4gICAgICAgICAgICAgIGNsdXN0ZXJSYWRpdXM6IDUwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWFwSW5zdGFuY2UuYWRkU291cmNlKFwicGluc1wiLCB7XG4gICAgICAgICAgICB0eXBlOiBcImdlb2pzb25cIixcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBjbHVzdGVyOiB0cnVlLFxuICAgICAgICAgICAgY2x1c3Rlck1heFpvb206IDE0LFxuICAgICAgICAgICAgY2x1c3RlclJhZGl1czogNTBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbWFwSW5zdGFuY2UuZ2V0TGF5ZXIoXCJwaW5zLWNsdXN0ZXJzXCIpKSB7XG4gICAgICAgICAgbWFwSW5zdGFuY2UuYWRkTGF5ZXIoe1xuICAgICAgICAgICAgaWQ6IFwicGlucy1jbHVzdGVyc1wiLFxuICAgICAgICAgICAgdHlwZTogXCJjaXJjbGVcIixcbiAgICAgICAgICAgIHNvdXJjZTogXCJwaW5zXCIsXG4gICAgICAgICAgICBmaWx0ZXI6IFtcImhhc1wiLCBcInBvaW50X2NvdW50XCJdLFxuICAgICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgICAgXCJjaXJjbGUtY29sb3JcIjogW1xuICAgICAgICAgICAgICAgIFwic3RlcFwiLFxuICAgICAgICAgICAgICAgIFtcImdldFwiLCBcInBvaW50X2NvdW50XCJdLFxuICAgICAgICAgICAgICAgIFwiI0Y1OUUwQlwiLFxuICAgICAgICAgICAgICAgIDEwLFxuICAgICAgICAgICAgICAgIFwiI0Y5NzMxNlwiLFxuICAgICAgICAgICAgICAgIDUwLFxuICAgICAgICAgICAgICAgIFwiI0RDMjYyNlwiXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIFwiY2lyY2xlLXJhZGl1c1wiOiBbXG4gICAgICAgICAgICAgICAgXCJzdGVwXCIsXG4gICAgICAgICAgICAgICAgW1wiZ2V0XCIsIFwicG9pbnRfY291bnRcIl0sXG4gICAgICAgICAgICAgICAgMjAsXG4gICAgICAgICAgICAgICAgMTAsXG4gICAgICAgICAgICAgICAgMjgsXG4gICAgICAgICAgICAgICAgNTAsXG4gICAgICAgICAgICAgICAgMzhcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgXCJjaXJjbGUtc3Ryb2tlLXdpZHRoXCI6IDMsXG4gICAgICAgICAgICAgIFwiY2lyY2xlLXN0cm9rZS1jb2xvclwiOiBcIiNmZmZmZmZcIixcbiAgICAgICAgICAgICAgXCJjaXJjbGUtb3BhY2l0eVwiOiAwLjg1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW1hcEluc3RhbmNlLmdldExheWVyKFwicGlucy1jb3VudFwiKSkge1xuICAgICAgICAgIG1hcEluc3RhbmNlLmFkZExheWVyKHtcbiAgICAgICAgICAgIGlkOiBcInBpbnMtY291bnRcIixcbiAgICAgICAgICAgIHR5cGU6IFwic3ltYm9sXCIsXG4gICAgICAgICAgICBzb3VyY2U6IFwicGluc1wiLFxuICAgICAgICAgICAgZmlsdGVyOiBbXCJoYXNcIiwgXCJwb2ludF9jb3VudFwiXSxcbiAgICAgICAgICAgIGxheW91dDoge1xuICAgICAgICAgICAgICBcInRleHQtZmllbGRcIjogXCJ7cG9pbnRfY291bnRfYWJicmV2aWF0ZWR9XCIsXG4gICAgICAgICAgICAgIFwidGV4dC1mb250XCI6IFtcIkRJTiBPZmZjIFBybyBNZWRpdW1cIiwgXCJBcmlhbCBVbmljb2RlIE1TIEJvbGRcIl0sXG4gICAgICAgICAgICAgIFwidGV4dC1zaXplXCI6IDE0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgICAgXCJ0ZXh0LWNvbG9yXCI6IFwiI2ZmZmZmZlwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhZGRVbmNsdXN0ZXJlZExheWVyID0gKCkgPT4ge1xuICAgICAgICAgIGlmIChtYXBJbnN0YW5jZS5nZXRMYXllcihcInBpbnMtdW5jbHVzdGVyZWRcIikpIHJldHVybjtcblxuICAgICAgICAgIGNvbnN0IHJlcXVpcmVkSWNvbnMgPSBbXG4gICAgICAgICAgICBcInNjYW0taWNvblwiLFxuICAgICAgICAgICAgXCJoYXJhc3NtZW50LWljb25cIixcbiAgICAgICAgICAgIFwib3ZlcmNoYXJnZS1pY29uXCIsXG4gICAgICAgICAgICBcIm90aGVyLWljb25cIixcbiAgICAgICAgICAgIFwiZGVmYXVsdC1waW4taWNvblwiXG4gICAgICAgICAgXTtcbiAgICAgICAgICBjb25zdCBhbGxJY29uc0xvYWRlZCA9IHJlcXVpcmVkSWNvbnMuZXZlcnkoKG5hbWUpID0+IG1hcEluc3RhbmNlLmhhc0ltYWdlKG5hbWUpKTtcblxuICAgICAgICAgIGlmICghYWxsSWNvbnNMb2FkZWQpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAobWFwSW5zdGFuY2UuZ2V0U291cmNlKFwicGluc1wiKSAmJiAhbWFwSW5zdGFuY2UuZ2V0TGF5ZXIoXCJwaW5zLXVuY2x1c3RlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgYWRkVW5jbHVzdGVyZWRMYXllcigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1hcEluc3RhbmNlLmFkZExheWVyKHtcbiAgICAgICAgICAgIGlkOiBcInBpbnMtdW5jbHVzdGVyZWRcIixcbiAgICAgICAgICAgIHR5cGU6IFwic3ltYm9sXCIsXG4gICAgICAgICAgICBzb3VyY2U6IFwicGluc1wiLFxuICAgICAgICAgICAgZmlsdGVyOiBbXCIhXCIsIFtcImhhc1wiLCBcInBvaW50X2NvdW50XCJdXSxcbiAgICAgICAgICAgIGxheW91dDoge1xuICAgICAgICAgICAgICBcImljb24taW1hZ2VcIjogW1xuICAgICAgICAgICAgICAgIFwiY29hbGVzY2VcIixcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICBcIm1hdGNoXCIsXG4gICAgICAgICAgICAgICAgICBbXCJnZXRcIiwgXCJ0eXBlXCJdLFxuICAgICAgICAgICAgICAgICAgXCJzY2FtXCIsXG4gICAgICAgICAgICAgICAgICBcInNjYW0taWNvblwiLFxuICAgICAgICAgICAgICAgICAgXCJoYXJhc3NtZW50XCIsXG4gICAgICAgICAgICAgICAgICBcImhhcmFzc21lbnQtaWNvblwiLFxuICAgICAgICAgICAgICAgICAgXCJvdmVyY2hhcmdlXCIsXG4gICAgICAgICAgICAgICAgICBcIm92ZXJjaGFyZ2UtaWNvblwiLFxuICAgICAgICAgICAgICAgICAgXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgICAgXCJvdGhlci1pY29uXCIsXG4gICAgICAgICAgICAgICAgICBcImRlZmF1bHQtcGluLWljb25cIlxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgXCJkZWZhdWx0LXBpbi1pY29uXCJcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgXCJpY29uLXNpemVcIjogMSxcbiAgICAgICAgICAgICAgXCJpY29uLWFuY2hvclwiOiBcImJvdHRvbVwiLFxuICAgICAgICAgICAgICBcImljb24tYWxsb3ctb3ZlcmxhcFwiOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCFtYXBJbnN0YW5jZS5nZXRMYXllcihcInBpbnMtdW5jbHVzdGVyZWRcIikpIHtcbiAgICAgICAgICBsb2FkSWNvbnMoYWRkVW5jbHVzdGVyZWRMYXllcik7XG4gICAgICAgICAgY29uc3QgcmVxdWlyZWRJY29ucyA9IFtcbiAgICAgICAgICAgIFwic2NhbS1pY29uXCIsXG4gICAgICAgICAgICBcImhhcmFzc21lbnQtaWNvblwiLFxuICAgICAgICAgICAgXCJvdmVyY2hhcmdlLWljb25cIixcbiAgICAgICAgICAgIFwib3RoZXItaWNvblwiLFxuICAgICAgICAgICAgXCJkZWZhdWx0LXBpbi1pY29uXCJcbiAgICAgICAgICBdO1xuICAgICAgICAgIGlmIChyZXF1aXJlZEljb25zLmV2ZXJ5KChuYW1lKSA9PiBtYXBJbnN0YW5jZS5oYXNJbWFnZShuYW1lKSkpIHtcbiAgICAgICAgICAgIGFkZFVuY2x1c3RlcmVkTGF5ZXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGVuc3VyZUxheWVycyhcbiAgICAgICAgdmFsaWRQaW5zLmxlbmd0aCA+IDBcbiAgICAgICAgICA/IHBpbnNHZW9KU09OXG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiRmVhdHVyZUNvbGxlY3Rpb25cIixcbiAgICAgICAgICAgICAgZmVhdHVyZXM6IFtdXG4gICAgICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCBoYW5kbGVDbHVzdGVyQ2xpY2sgPSAoZTogbWFwYm94Z2wuTWFwTGF5ZXJNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVzID0gbWFwSW5zdGFuY2UucXVlcnlSZW5kZXJlZEZlYXR1cmVzKGUucG9pbnQsIHtcbiAgICAgICAgICBsYXllcnM6IFtcInBpbnMtY2x1c3RlcnNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghZmVhdHVyZXMubGVuZ3RoKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgY2x1c3RlcklkID0gZmVhdHVyZXNbMF0ucHJvcGVydGllcz8uY2x1c3Rlcl9pZDtcbiAgICAgICAgY29uc3Qgc291cmNlID0gbWFwSW5zdGFuY2UuZ2V0U291cmNlKFwicGluc1wiKSBhcyBtYXBib3hnbC5HZW9KU09OU291cmNlO1xuXG4gICAgICAgIHNvdXJjZS5nZXRDbHVzdGVyRXhwYW5zaW9uWm9vbShjbHVzdGVySWQsIChlcnIsIHpvb20pID0+IHtcbiAgICAgICAgICBpZiAoZXJyIHx8ICFtYXBJbnN0YW5jZSkgcmV0dXJuO1xuXG4gICAgICAgICAgY29uc3QgY29vcmRpbmF0ZXMgPSAoZmVhdHVyZXNbMF0uZ2VvbWV0cnkgYXMgR2VvSlNPTi5Qb2ludCkuY29vcmRpbmF0ZXMgYXMgW1xuICAgICAgICAgICAgbnVtYmVyLFxuICAgICAgICAgICAgbnVtYmVyXG4gICAgICAgICAgXTtcbiAgICAgICAgICBtYXBJbnN0YW5jZS5lYXNlVG8oe1xuICAgICAgICAgICAgY2VudGVyOiBjb29yZGluYXRlcyxcbiAgICAgICAgICAgIHpvb206IHpvb20gfHwgMTVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBoYW5kbGVQaW5DbGljayA9IChlOiBtYXBib3hnbC5NYXBMYXllck1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFlLmZlYXR1cmVzIHx8ICFlLmZlYXR1cmVzWzBdIHx8ICFvblBpbkNsaWNrUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gZS5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzO1xuICAgICAgICBpZiAoIXByb3BlcnRpZXMpIHJldHVybjtcblxuICAgICAgICBsZXQgcGluRGF0YSA9IHByb3BlcnRpZXMuX3BpbkRhdGEgYXMgUGluIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICghcGluRGF0YSB8fCAhcGluRGF0YS5pZCkge1xuICAgICAgICAgIGNvbnN0IHBpbklkID0gcHJvcGVydGllcy5pZDtcbiAgICAgICAgICBpZiAocGluSWQpIHtcbiAgICAgICAgICAgIHBpbkRhdGEgPSBwaW5zLmZpbmQoKHApID0+IHAuaWQgPT09IHBpbklkKTtcbiAgICAgICAgICAgIGlmICghcGluRGF0YSAmJiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvb3JkcyA9IChlLmZlYXR1cmVzWzBdLmdlb21ldHJ5IGFzIEdlb0pTT04uUG9pbnQpLmNvb3JkaW5hdGVzO1xuICAgICAgICAgICAgICBwaW5EYXRhID0ge1xuICAgICAgICAgICAgICAgIGlkOiBwcm9wZXJ0aWVzLmlkLFxuICAgICAgICAgICAgICAgIGNpdHlfaWQ6IHByb3BlcnRpZXMuY2l0eV9pZCB8fCAwLFxuICAgICAgICAgICAgICAgIHR5cGU6IChwcm9wZXJ0aWVzLnR5cGUgfHwgXCJvdGhlclwiKSBhcyBQaW5UeXBlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBwcm9wZXJ0aWVzLnRpdGxlIHx8IFwiVW5rbm93blwiLFxuICAgICAgICAgICAgICAgIHN1bW1hcnk6IHByb3BlcnRpZXMuc3VtbWFyeSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHByb3BlcnRpZXMuZGV0YWlscyB8fCBudWxsLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIlBvaW50XCIsXG4gICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogY29vcmRzIGFzIFtudW1iZXIsIG51bWJlcl1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN0YXR1czogKHByb3BlcnRpZXMuc3RhdHVzIHx8IFwiYXBwcm92ZWRcIikgYXMgUGluU3RhdHVzLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogKHByb3BlcnRpZXMuc291cmNlIHx8IFwidXNlclwiKSBhcyBQaW5Tb3VyY2UsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogcHJvcGVydGllcy5jcmVhdGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICB9IGFzIFBpbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGluRGF0YSkge1xuICAgICAgICAgIG9uUGluQ2xpY2tSZWYuY3VycmVudChwaW5EYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgZmluZCBwaW4gZGF0YSBmb3IgY2xpY2s6XCIsIHByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBoYW5kbGVNb3VzZUVudGVyID0gKCkgPT4ge1xuICAgICAgICBtYXBJbnN0YW5jZS5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICAgIH07XG4gICAgICBjb25zdCBoYW5kbGVNb3VzZUxlYXZlID0gKCkgPT4ge1xuICAgICAgICBtYXBJbnN0YW5jZS5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSBcIlwiO1xuICAgICAgfTtcblxuICAgICAgbWFwSW5zdGFuY2Uub2ZmKFwiY2xpY2tcIiwgXCJwaW5zLWNsdXN0ZXJzXCIpO1xuICAgICAgbWFwSW5zdGFuY2Uub2ZmKFwiY2xpY2tcIiwgXCJwaW5zLXVuY2x1c3RlcmVkXCIpO1xuICAgICAgbWFwSW5zdGFuY2Uub2ZmKFwibW91c2VlbnRlclwiLCBcInBpbnMtY2x1c3RlcnNcIik7XG4gICAgICBtYXBJbnN0YW5jZS5vZmYoXCJtb3VzZWxlYXZlXCIsIFwicGlucy1jbHVzdGVyc1wiKTtcbiAgICAgIG1hcEluc3RhbmNlLm9mZihcIm1vdXNlZW50ZXJcIiwgXCJwaW5zLXVuY2x1c3RlcmVkXCIpO1xuICAgICAgbWFwSW5zdGFuY2Uub2ZmKFwibW91c2VsZWF2ZVwiLCBcInBpbnMtdW5jbHVzdGVyZWRcIik7XG5cbiAgICAgIG1hcEluc3RhbmNlLm9uKFwiY2xpY2tcIiwgXCJwaW5zLWNsdXN0ZXJzXCIsIGhhbmRsZUNsdXN0ZXJDbGljayk7XG4gICAgICBtYXBJbnN0YW5jZS5vbihcImNsaWNrXCIsIFwicGlucy11bmNsdXN0ZXJlZFwiLCBoYW5kbGVQaW5DbGljayk7XG4gICAgICBtYXBJbnN0YW5jZS5vbihcIm1vdXNlZW50ZXJcIiwgXCJwaW5zLWNsdXN0ZXJzXCIsIGhhbmRsZU1vdXNlRW50ZXIpO1xuICAgICAgbWFwSW5zdGFuY2Uub24oXCJtb3VzZWxlYXZlXCIsIFwicGlucy1jbHVzdGVyc1wiLCBoYW5kbGVNb3VzZUxlYXZlKTtcbiAgICAgIG1hcEluc3RhbmNlLm9uKFwibW91c2VlbnRlclwiLCBcInBpbnMtdW5jbHVzdGVyZWRcIiwgaGFuZGxlTW91c2VFbnRlcik7XG4gICAgICBtYXBJbnN0YW5jZS5vbihcIm1vdXNlbGVhdmVcIiwgXCJwaW5zLXVuY2x1c3RlcmVkXCIsIGhhbmRsZU1vdXNlTGVhdmUpO1xuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoIW1hcEluc3RhbmNlIHx8ICFtYXBJbnN0YW5jZS5nZXRTdHlsZSgpKSByZXR1cm47XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbWFwSW5zdGFuY2Uub2ZmKFwiY2xpY2tcIiwgXCJwaW5zLWNsdXN0ZXJzXCIsIGhhbmRsZUNsdXN0ZXJDbGljayk7XG4gICAgICAgICAgbWFwSW5zdGFuY2Uub2ZmKFwiY2xpY2tcIiwgXCJwaW5zLXVuY2x1c3RlcmVkXCIsIGhhbmRsZVBpbkNsaWNrKTtcbiAgICAgICAgICBtYXBJbnN0YW5jZS5vZmYoXCJtb3VzZWVudGVyXCIsIFwicGlucy1jbHVzdGVyc1wiLCBoYW5kbGVNb3VzZUVudGVyKTtcbiAgICAgICAgICBtYXBJbnN0YW5jZS5vZmYoXCJtb3VzZWxlYXZlXCIsIFwicGlucy1jbHVzdGVyc1wiLCBoYW5kbGVNb3VzZUxlYXZlKTtcbiAgICAgICAgICBtYXBJbnN0YW5jZS5vZmYoXCJtb3VzZWVudGVyXCIsIFwicGlucy11bmNsdXN0ZXJlZFwiLCBoYW5kbGVNb3VzZUVudGVyKTtcbiAgICAgICAgICBtYXBJbnN0YW5jZS5vZmYoXCJtb3VzZWxlYXZlXCIsIFwicGlucy11bmNsdXN0ZXJlZFwiLCBoYW5kbGVNb3VzZUxlYXZlKTtcblxuICAgICAgICAgIGlmIChtYXBJbnN0YW5jZS5nZXRMYXllcihcInBpbnMtY2x1c3RlcnNcIikpIHtcbiAgICAgICAgICAgIG1hcEluc3RhbmNlLnJlbW92ZUxheWVyKFwicGlucy1jbHVzdGVyc1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1hcEluc3RhbmNlLmdldExheWVyKFwicGlucy1jb3VudFwiKSkge1xuICAgICAgICAgICAgbWFwSW5zdGFuY2UucmVtb3ZlTGF5ZXIoXCJwaW5zLWNvdW50XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobWFwSW5zdGFuY2UuZ2V0TGF5ZXIoXCJwaW5zLXVuY2x1c3RlcmVkXCIpKSB7XG4gICAgICAgICAgICBtYXBJbnN0YW5jZS5yZW1vdmVMYXllcihcInBpbnMtdW5jbHVzdGVyZWRcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChtYXBJbnN0YW5jZS5nZXRTb3VyY2UoXCJwaW5zXCIpKSB7XG4gICAgICAgICAgICBtYXBJbnN0YW5jZS5yZW1vdmVTb3VyY2UoXCJwaW5zXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBpZ25vcmVcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LCBbbWFwTG9hZGVkLCBwaW5zXSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKCFtYXAuY3VycmVudCB8fCAhbWFwTG9hZGVkIHx8ICF1c2VyTG9jYXRpb24pIHJldHVybjtcblxuICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZWwuY2xhc3NOYW1lID0gXCJ1c2VyLWxvY2F0aW9uLW1hcmtlclwiO1xuICAgICAgZWwuc3R5bGUud2lkdGggPSBcIjE2cHhcIjtcbiAgICAgIGVsLnN0eWxlLmhlaWdodCA9IFwiMTZweFwiO1xuICAgICAgZWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI1MCVcIjtcbiAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiIzRBOTBFMlwiO1xuICAgICAgZWwuc3R5bGUuYm9yZGVyID0gXCIzcHggc29saWQgd2hpdGVcIjtcbiAgICAgIGVsLnN0eWxlLmJveFNoYWRvdyA9IFwiMCAwIDEwcHggcmdiYSg3NCwgMTQ0LCAyMjYsIDAuOClcIjtcblxuICAgICAgY29uc3QgbWFya2VyID0gbmV3IG1hcGJveGdsLk1hcmtlcihlbClcbiAgICAgICAgLnNldExuZ0xhdChbdXNlckxvY2F0aW9uLmxvbmdpdHVkZSwgdXNlckxvY2F0aW9uLmxhdGl0dWRlXSlcbiAgICAgICAgLmFkZFRvKG1hcC5jdXJyZW50KTtcblxuICAgICAgbWFwLmN1cnJlbnQ/LmZseVRvKHtcbiAgICAgICAgY2VudGVyOiBbdXNlckxvY2F0aW9uLmxvbmdpdHVkZSwgdXNlckxvY2F0aW9uLmxhdGl0dWRlXSxcbiAgICAgICAgem9vbTogMTQsXG4gICAgICAgIGR1cmF0aW9uOiAxMDAwXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBtYXJrZXIucmVtb3ZlKCk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIG1hcmtlciBhbHJlYWR5IHJlbW92ZWRcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LCBbbWFwTG9hZGVkLCB1c2VyTG9jYXRpb25dKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIHJlZj17bWFwQ29udGFpbmVyfVxuICAgICAgICBjbGFzc05hbWU9e2ByZWxhdGl2ZSBoLWZ1bGwgdy1mdWxsICR7Y2xhc3NOYW1lfWB9XG4gICAgICAgIHN0eWxlPXt7IG1pbkhlaWdodDogXCI0MDBweFwiIH19XG4gICAgICAvPlxuICAgICk7XG4gIH1cbik7XG5cbk1hcFZpZXcuZGlzcGxheU5hbWUgPSBcIk1hcFZpZXdcIjtcblxuZXhwb3J0IGRlZmF1bHQgTWFwVmlldztcblxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlSW1wZXJhdGl2ZUhhbmRsZSIsInVzZVJlZiIsInVzZVN0YXRlIiwiZm9yd2FyZFJlZiIsIm1hcGJveGdsIiwiZ2V0UGluQ29sb3IiLCJnZXRab25lQ29sb3IiLCJhY2Nlc3NUb2tlbiIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19NQVBCT1hfVE9LRU4iLCJNYXBWaWV3IiwicmVmIiwiem9uZXMiLCJwaW5zIiwiY2VudGVyIiwidXNlckxvY2F0aW9uIiwib25ab25lQ2xpY2siLCJvblBpbkNsaWNrIiwib25WaWV3cG9ydENoYW5nZSIsIm1heEJvdW5kcyIsImNsYXNzTmFtZSIsImRpc2FibGVab29tIiwibWFwQ29udGFpbmVyIiwibWFwIiwibWFwTG9hZGVkIiwic2V0TWFwTG9hZGVkIiwib25ab25lQ2xpY2tSZWYiLCJvblBpbkNsaWNrUmVmIiwib25WaWV3cG9ydENoYW5nZVJlZiIsImN1cnJlbnQiLCJ6b29tVG9ab25lIiwiem9uZSIsImNvb3JkaW5hdGVzIiwiZ2VvbSIsImJvdW5kcyIsInJlZHVjZSIsImFjYyIsImNvb3JkIiwiZXh0ZW5kIiwiTG5nTGF0Qm91bmRzIiwiZml0Qm91bmRzIiwicGFkZGluZyIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsIm1heFpvb20iLCJkdXJhdGlvbiIsImVycm9yIiwiY29uc29sZSIsInpvb21Ub1BpbiIsInBpbiIsImxuZyIsImxhdCIsImxvY2F0aW9uIiwiZmx5VG8iLCJ6b29tIiwiem9vbVRvTG9jYXRpb24iLCJNYXAiLCJjb250YWluZXIiLCJzdHlsZSIsImludGVyYWN0aXZlIiwic2Nyb2xsWm9vbSIsImJveFpvb20iLCJkcmFnUm90YXRlIiwiZHJhZ1BhbiIsImtleWJvYXJkIiwiZG91YmxlQ2xpY2tab29tIiwidG91Y2hab29tUm90YXRlIiwib24iLCJnZXRCb3VuZHMiLCJoYW5kbGVWaWV3cG9ydENoYW5nZSIsIl9oYW5kbGVWaWV3cG9ydENoYW5nZSIsIm9mZiIsInJlbW92ZSIsInNldE1heEJvdW5kcyIsIm1hcEluc3RhbmNlIiwiaGFuZGxlWm9uZUNsaWNrIiwiZSIsImZlYXR1cmVzIiwiZmVhdHVyZSIsInpvbmVEYXRhIiwiZmluZCIsInoiLCJpZCIsInByb3BlcnRpZXMiLCJoYW5kbGVab25lQ2xpY2tXaXRoUGluQ2hlY2siLCJjbGlja2VkUG9pbnQiLCJwb2ludCIsInBpbkZlYXR1cmVzIiwicXVlcnlSZW5kZXJlZEZlYXR1cmVzIiwibGF5ZXJzIiwibGVuZ3RoIiwiaGFuZGxlTW91c2VFbnRlciIsImdldENhbnZhcyIsImN1cnNvciIsImhhbmRsZU1vdXNlTGVhdmUiLCJhZGRab25lc0xheWVyIiwiem9uZXNHZW9KU09OIiwidHlwZSIsImxhYmVsIiwibGV2ZWwiLCJyZWFzb25fc2hvcnQiLCJyZWFzb25fbG9uZyIsImdlb21ldHJ5Iiwic291cmNlIiwiZ2V0U291cmNlIiwic2V0RGF0YSIsImdldExheWVyIiwicmVtb3ZlTGF5ZXIiLCJyZW1vdmVTb3VyY2UiLCJhZGRTb3VyY2UiLCJkYXRhIiwiYWRkTGF5ZXIiLCJwYWludCIsImlzU3R5bGVMb2FkZWQiLCJvbmNlIiwiZ2V0U3R5bGUiLCJjcmVhdGVQaW5BbGVydFNWRyIsImNvbG9yIiwibG9hZEljb25zIiwiY2FsbGJhY2siLCJpY29uSW1hZ2VzIiwibmFtZSIsInN2ZyIsImxvYWRlZENvdW50IiwidG90YWxJY29ucyIsImNhbGxiYWNrQ2FsbGVkIiwiY2hlY2tDb21wbGV0ZSIsImZvckVhY2giLCJpY29uIiwiaGFzSW1hZ2UiLCJpbWciLCJJbWFnZSIsIm9ubG9hZCIsImFkZEltYWdlIiwib25lcnJvciIsInNyYyIsImVuY29kZVVSSUNvbXBvbmVudCIsInZhbGlkUGlucyIsImZpbHRlciIsIndhcm4iLCJjb29yZHMiLCJBcnJheSIsImlzQXJyYXkiLCJOdW1iZXIiLCJpc05hTiIsInBpbnNHZW9KU09OIiwidGl0bGUiLCJzdW1tYXJ5IiwiZGV0YWlscyIsImNpdHlfaWQiLCJzdGF0dXMiLCJjcmVhdGVkX2F0IiwiX3BpbkRhdGEiLCJlbnN1cmVMYXllcnMiLCJjbHVzdGVyIiwiY2x1c3Rlck1heFpvb20iLCJjbHVzdGVyUmFkaXVzIiwibGF5b3V0IiwiYWRkVW5jbHVzdGVyZWRMYXllciIsInJlcXVpcmVkSWNvbnMiLCJhbGxJY29uc0xvYWRlZCIsImV2ZXJ5Iiwic2V0VGltZW91dCIsImhhbmRsZUNsdXN0ZXJDbGljayIsImNsdXN0ZXJJZCIsImNsdXN0ZXJfaWQiLCJnZXRDbHVzdGVyRXhwYW5zaW9uWm9vbSIsImVyciIsImVhc2VUbyIsImhhbmRsZVBpbkNsaWNrIiwicGluRGF0YSIsInBpbklkIiwicCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJoZWlnaHQiLCJib3JkZXJSYWRpdXMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXIiLCJib3hTaGFkb3ciLCJtYXJrZXIiLCJNYXJrZXIiLCJzZXRMbmdMYXQiLCJsb25naXR1ZGUiLCJsYXRpdHVkZSIsImFkZFRvIiwiZGl2IiwibWluSGVpZ2h0IiwiZGlzcGxheU5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/MapView.tsx\n"));

/***/ })

});